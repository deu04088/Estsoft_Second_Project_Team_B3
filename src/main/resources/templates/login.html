<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>로그인 | BizBeacon for Boss</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link th:href="@{/css/auth.css}" rel="stylesheet"/>
    <link th:href="@{/css/basic-header.css}" rel="stylesheet"/>
    <link th:href="@{/css/footer.css}" rel="stylesheet"/>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
</head>
<body class="auth-page">

<!-- Header -->
<div th:replace="partials/header :: header"></div>

<main class="container my-5 auth-container">
    <h2 class="text-center mb-4">로그인</h2>

    <!--
            [로그인 처리 흐름]

            1. 로그인 버튼은 단순히 서버의 로그인 엔드포인트(/login)로 요청을 보냄.
               → 프론트에서는 아이디/비밀번호 입력값만 넘겨주면 됨.

            2. 백엔드(Spring Boot)에서 아이디/비밀번호 검증 진행.
               - 실패 시: 다시 /login 페이지로 redirect + 오류 메시지 전달
               - 성공 시: 세션/토큰 발급 후 사용자 정보 확인

            3. 로그인 성공 후 분기 처리:
               - 사용자 DB에 address 값이 있으면 → /restaurants 페이지로 redirect
               - address 값이 없으면 → /address-certify 페이지로 redirect
    -->

    <!-- 에러 메시지 -->
    <div id="errorBox" class="alert alert-danger text-center" style="display:none;"></div>

    <!-- 로그인 폼 -->
    <form id="loginForm" class="d-flex flex-column gap-4">
        <!-- 아이디 -->
        <div>
            <div class="input-wrapper">
                <i class="fa-solid fa-user left-icon"></i>
                <input type="text" id="userName" name="userName"
                       class="form-control form-control py-3"
                       placeholder="아이디" required/>
            </div>
        </div>

        <!-- 비밀번호 -->
        <div>
            <div class="input-wrapper">
                <i class="fa-solid fa-lock left-icon"></i>
                <input type="password" id="password" name="password"
                       class="form-control form-control py-3"
                       placeholder="비밀번호" required/>
                <div class="right-icons">
                    <i class="fa-solid fa-eye toggle-password" data-target="password"></i>
                </div>
            </div>
        </div>

        <!-- 로그인 버튼 -->
        <button type="submit" class="btn btn-primary py-3">로그인</button>
    </form>

    <!-- 회원가입 이동 -->
    <div class="text-center mt-3">
        <p>
            아직 계정이 없으신가요? <a th:href="@{/signup}">회원가입</a>
        </p>
    </div>

    <!-- 구글 로그인 버튼 추가 -->
    <div class="text-center mt-4">
        <a href="/oauth2/authorization/google" class="btn btn-primary text-white w-100 py-3">
            <i class="fa-brands fa-google me-2"></i> Google 계정으로 로그인
        </a>
    </div>
</main>

<!-- Footer -->
<div th:replace="partials/footer :: footer"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/login.js}"></script>
</body>
</html>
