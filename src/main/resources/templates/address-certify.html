<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>동네 인증 | BizBeacon for Boss</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

    <style>
        body {
            background-color: #e6f9f9;
            font-family: 'Noto Sans KR', sans-serif;
        }

        main {
            max-width: 900px;
            margin: 4rem auto 5rem;
            background: #ffffff;
            padding: 2.5rem 3rem;
            border-radius: 14px;
            box-shadow: 0 4px 18px rgba(0,0,0,0.08);
        }

        h2 {
            font-weight: 700;
            color: #222;
            border-left: 6px solid #20a198;
            padding-left: 12px;
            margin-bottom: 2rem;
        }

        .address-input-group {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .address-input-group input {
            flex: 1;
            border-radius: 8px;
            border: 1px solid #ccc;
            padding: 0.6rem 0.8rem;
        }

        .addressBtn {
            background-color: #20a198;
            color: #fff;
            font-weight: 600;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .addressBtn:hover {
            background-color: #18887f;
        }

        .map-box {
            border-radius: 10px;
            border: 1px solid #dee2e6;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        #map {
            width: 100%;
            height: 500px;
        }

        .map-title {
            background-color: #f2fefd;
            color: #009688;
            font-weight: 600;
            padding: 0.8rem 1.2rem;
            border-bottom: 1px solid #dee2e6;
        }

        .info-text {
            text-align: center;
            color: #555;
            margin-top: 1rem;
        }

        .btn-certify {
            background-color: #20a198;
            color: #fff;
            font-weight: 600;
            padding: 0.8rem;
            border-radius: 8px;
            border: none;
            width: 100%;
            transition: all 0.2s ease;
        }

        .btn-certify:hover {
            background-color: #18887f;
        }

        .btn-certify:disabled {
            background-color: #b9dedb;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            main {
                padding: 1.5rem;
            }
            .address-input-group {
                flex-direction: column;
                gap: 0.6rem;
            }
        }
    </style>
</head>

<body>
<main>
    <h2>동네 인증</h2>

    <!-- 주소 입력 -->
    <div class="address-input-group">
        <input type="text" id="addressInput" name="address"
               class="form-control"
               placeholder="예) 서울특별시 종로구 회현동"
               title="동/읍/면까지 입력해주세요" required>

        <button type="button" class="addressBtn" id="addressSetBtn" th:if="${user.address == null}">
            내 동네 설정
        </button>
        <button type="button" class="addressBtn" id="addressUpBtn" th:if="${user.address != null}">
            내 동네 수정
        </button>
    </div>

    <!-- 지도 영역 -->
    <div class="map-box">
        <div class="map-title"><i class="fa-solid fa-location-dot me-2"></i>현재 위치로 동네 인증하기</div>
        <div id="map"></div>
    </div>

    <!-- 현재 위치 안내 -->
    <p class="info-text">현재 위치는 <strong id="ggaddress" class="text-success">서울특별시 종로구 회현동</strong> 입니다.</p>
    <p class="info-text"><span id="result"></span></p>

    <!-- 인증 완료 버튼 -->
    <form class="d-grid gap-2 mt-4" id="certifyForm">
        <input type="hidden" name="address" id="hiddenAddress">
        <button type="button" id="certifyBtn" class="btn-certify" disabled>
            동네인증 완료하기
        </button>
    </form>
</main>

<script th:inline="javascript">
    window.GOOGLE_MAPS_API_KEY = /*[[${apiKey}]]*/ 'DEFAULT_KEY';
</script>
<script src="/js/googlemap.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
